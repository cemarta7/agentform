import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-DMG2VJN2.js";import{d as h,r as v,h as w,i as z,b as i,o as l,e,f as x,t as r,n as b,j as k,c as S,k as q,l as p,u as F,m as C,p as D,F as H}from"./app-7FumtBI-.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-pFwWl1xq.js";import"./useForwardExpose-DdWrcZtM.js";import"./RovingFocusGroup-nlZ9EBw8.js";const E={class:"h-full p-4 bg-white dark:bg-gray-800 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},T={class:"flex items-center justify-between mb-4"},V={class:"flex items-center space-x-2"},I={key:0,class:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"},L={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},M={key:0,class:"text-red-600 dark:text-red-400 text-sm mb-4"},N={class:"space-y-4"},R={class:"grid grid-cols-2 gap-4"},A={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},P={class:"text-2xl font-bold text-gray-900 dark:text-white"},Q={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},J={class:"space-y-3"},U={class:"flex justify-between items-center"},B={class:"text-right"},O={class:"font-semibold text-gray-900 dark:text-white"},W={class:"flex justify-between items-center"},G={class:"text-right"},K={class:"font-semibold text-gray-900 dark:text-white"},X={class:"border-t border-gray-200 dark:border-gray-600 pt-3"},Y={class:"space-y-2"},Z={class:"flex justify-between items-center"},ee={class:"font-medium text-orange-600 dark:text-orange-400"},te={class:"flex justify-between items-center"},se={class:"font-medium text-blue-600 dark:text-blue-400"},re={class:"border-t border-gray-200 dark:border-gray-600 pt-3"},ae={class:"text-sm text-gray-600 dark:text-gray-400"},oe={class:"border-t border-gray-200 dark:border-gray-600 pt-3"},ie={class:"text-sm text-gray-600 dark:text-gray-400"},le={class:"border-t border-gray-200 dark:border-gray-600 pt-3"},de={class:"text-sm text-gray-600 dark:text-gray-400"},ne=h({__name:"AgentFormMetrics",setup($){const s=v({total_forms:0,verified_forms:0,emails_sent:0,verification_success_rate:0,email_success_rate:0,overall_completion_rate:0,pending_verification:0,pending_emails:0,time_started:0,time_ended:0,time_duration:0}),m=v(!0),d=v(null),_=v(null);let c=null;const y=async()=>{try{const o=await k.get("/api/metrics/agentform");s.value=o.data,_.value=new Date,d.value=null}catch(o){d.value="Failed to fetch AgentForm metrics",console.error("Error fetching AgentForm stats:",o)}finally{m.value=!1}},g=o=>`${o.toFixed(1)}%`,n=o=>o.toLocaleString(),f=o=>o>=80?"text-green-600 dark:text-green-400":o>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return w(()=>{y(),c=setInterval(y,15e3)}),z(()=>{c&&clearInterval(c)}),(o,t)=>(l(),i("div",E,[e("div",T,[t[0]||(t[0]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," ðŸ“‹ AgentForm Metrics ",-1)),e("div",V,[m.value?(l(),i("div",I)):x("",!0),_.value?(l(),i("span",L,r(_.value.toLocaleTimeString()),1)):x("",!0)])]),d.value?(l(),i("div",M,r(d.value),1)):x("",!0),e("div",N,[e("div",R,[e("div",A,[e("div",P,r(n(s.value.total_forms)),1),t[1]||(t[1]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"},"Total Forms",-1))]),e("div",Q,[e("div",{class:b(["text-2xl font-bold",f(s.value.overall_completion_rate)])},r(g(s.value.overall_completion_rate)),3),t[2]||(t[2]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"},"Completion Rate",-1))])]),e("div",J,[e("div",U,[t[3]||(t[3]=e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Verified Forms",-1)),e("div",B,[e("div",O,r(n(s.value.verified_forms)),1),e("div",{class:b(["text-xs",f(s.value.verification_success_rate)])},r(g(s.value.verification_success_rate)),3)])]),e("div",W,[t[4]||(t[4]=e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Emails Sent",-1)),e("div",G,[e("div",K,r(n(s.value.emails_sent)),1),e("div",{class:b(["text-xs",f(s.value.email_success_rate)])},r(g(s.value.email_success_rate)),3)])])]),e("div",X,[t[7]||(t[7]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Pending Work",-1)),e("div",Y,[e("div",Z,[t[5]||(t[5]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"ðŸ” Need Verification",-1)),e("span",ee,r(n(s.value.pending_verification)),1)]),e("div",te,[t[6]||(t[6]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"ðŸ“§ Need Email",-1)),e("span",se,r(n(s.value.pending_emails)),1)])])]),e("div",re,[t[8]||(t[8]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Time Started",-1)),e("div",ae,r(new Date(s.value.time_started).toLocaleString()),1)]),e("div",oe,[t[9]||(t[9]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Time Ended",-1)),e("div",ie,r(new Date(s.value.time_ended).toLocaleString()),1)]),e("div",le,[t[10]||(t[10]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Time Duration",-1)),e("div",de,r(s.value.time_duration)+" seconds ",1)])])]))}}),ue={class:"h-full p-4 bg-white dark:bg-gray-800 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},ce={class:"flex items-center justify-between mb-4"},ge={class:"flex items-center space-x-2"},xe={key:0,class:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"},ve={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},me={key:0,class:"text-red-600 dark:text-red-400 text-sm mb-4"},_e={class:"space-y-4"},be={class:"grid grid-cols-2 gap-4"},ye={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},fe={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},pe={class:"text-2xl font-bold text-red-600 dark:text-red-400"},ke={class:"space-y-2"},he={class:"space-y-1"},$e={class:"flex justify-between items-center"},we={class:"flex justify-between items-center"},ze={class:"flex justify-between items-center"},je={class:"border-t border-gray-200 dark:border-gray-600 pt-3"},Se={class:"grid grid-cols-3 gap-2 text-center"},qe={class:"font-semibold text-gray-900 dark:text-white"},Fe={class:"font-semibold text-gray-900 dark:text-white"},Ce={class:"font-semibold text-gray-900 dark:text-white"},De={class:"border-t border-gray-200 dark:border-gray-600 pt-3"},He={class:"space-y-1"},Ee={class:"flex justify-between items-center"},Te={class:"flex justify-between items-center"},Ve={class:"flex justify-between items-center"},Ie=h({__name:"HorizonMetrics",setup($){const s=v({queue_sizes:{default:0,verification:0,email:0},wait_times:{default:0,verification:0,email:0},processes:{verification:0,email:0,default:0},success_rates:{verification_jobs:0,email_jobs:0,overall:0},processing_times:{avg_verification_time:0,avg_email_time:0,avg_total_time:0},failed_jobs:0}),m=v(!0),d=v(null),_=v(null);let c=null;const y=async()=>{try{const u=await k.get("/api/metrics/horizon");s.value=u.data,_.value=new Date,d.value=null}catch(u){d.value="Failed to fetch Horizon metrics",console.error("Error fetching Horizon metrics:",u)}finally{m.value=!1}},g=u=>u.toLocaleString(),n=u=>`${u.toFixed(1)}%`,f=u=>u===0?"text-green-600 dark:text-green-400":u<10?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",o=u=>u>=95?"text-green-600 dark:text-green-400":u>=85?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",t=()=>s.value.queue_sizes.default+s.value.queue_sizes.verification+s.value.queue_sizes.email;return w(()=>{y(),c=setInterval(y,15e3)}),z(()=>{c&&clearInterval(c)}),(u,a)=>(l(),i("div",ue,[e("div",ce,[a[0]||(a[0]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," ðŸš€ Horizon Metrics ",-1)),e("div",ge,[m.value?(l(),i("div",xe)):x("",!0),_.value?(l(),i("span",ve,r(_.value.toLocaleTimeString()),1)):x("",!0)])]),d.value?(l(),i("div",me,r(d.value),1)):x("",!0),e("div",_e,[e("div",be,[e("div",ye,[e("div",{class:b(["text-2xl font-bold",f(t())])},r(g(t())),3),a[1]||(a[1]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"},"Total Queued",-1))]),e("div",fe,[e("div",pe,r(g(s.value.failed_jobs)),1),a[2]||(a[2]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"},"Failed Jobs",-1))])]),e("div",ke,[a[6]||(a[6]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Queue Sizes",-1)),e("div",he,[e("div",$e,[a[3]||(a[3]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Default",-1)),e("span",{class:b(["font-medium",f(s.value.queue_sizes.default)])},r(g(s.value.queue_sizes.default)),3)]),e("div",we,[a[4]||(a[4]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Verification",-1)),e("span",{class:b(["font-medium",f(s.value.queue_sizes.verification)])},r(g(s.value.queue_sizes.verification)),3)]),e("div",ze,[a[5]||(a[5]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Email",-1)),e("span",{class:b(["font-medium",f(s.value.queue_sizes.email)])},r(g(s.value.queue_sizes.email)),3)])])]),e("div",je,[a[10]||(a[10]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Processes",-1)),e("div",Se,[e("div",null,[e("div",qe,r(g(s.value.processes.verification)),1),a[7]||(a[7]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Verification",-1))]),e("div",null,[e("div",Fe,r(g(s.value.processes.email)),1),a[8]||(a[8]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Email",-1))]),e("div",null,[e("div",Ce,r(g(s.value.processes.default)),1),a[9]||(a[9]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Default",-1))])])]),e("div",De,[a[14]||(a[14]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Success Rates",-1)),e("div",He,[e("div",Ee,[a[11]||(a[11]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Overall",-1)),e("span",{class:b(["font-medium",o(s.value.success_rates.overall)])},r(n(s.value.success_rates.overall)),3)]),e("div",Te,[a[12]||(a[12]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Verification",-1)),e("span",{class:b(["font-medium",o(s.value.success_rates.verification_jobs)])},r(n(s.value.success_rates.verification_jobs)),3)]),e("div",Ve,[a[13]||(a[13]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Email",-1)),e("span",{class:b(["font-medium",o(s.value.success_rates.email_jobs)])},r(n(s.value.success_rates.email_jobs)),3)])])])])]))}}),Le={class:"h-full p-4 bg-white dark:bg-gray-800 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},Me={class:"flex items-center justify-between mb-4"},Ne={class:"flex items-center space-x-2"},Re={key:0,class:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"},Ae={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},Pe={key:0,class:"text-red-600 dark:text-red-400 text-sm mb-4"},Qe={class:"space-y-4"},Je={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center"},Ue={class:"text-3xl mb-2"},Be={class:"grid grid-cols-2 gap-3"},Oe={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},We={class:"text-xl font-bold text-gray-900 dark:text-white"},Ge={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},Ke={class:"text-xl font-bold text-gray-900 dark:text-white"},Xe={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},Ye={class:"text-xl font-bold text-gray-900 dark:text-white"},Ze={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},et={class:"text-xl font-bold text-gray-900 dark:text-white"},tt={class:"space-y-2"},st={key:0,class:"flex items-center space-x-2 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},rt={class:"text-sm text-red-700 dark:text-red-300"},at={key:1,class:"flex items-center space-x-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"},ot={class:"text-sm text-yellow-700 dark:text-yellow-300"},it={key:2,class:"flex items-center space-x-2 p-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg"},lt={class:"text-sm text-orange-700 dark:text-orange-300"},dt={key:3,class:"flex items-center space-x-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},nt={class:"text-sm text-blue-700 dark:text-blue-300"},ut={key:4,class:"flex items-center space-x-2 p-2 bg-green-50 dark:bg-green-900/20 rounded-lg"},ct=h({__name:"SystemStatus",setup($){const s=v({agentform:{total_forms:0,overall_completion_rate:0,pending_verification:0,pending_emails:0},horizon:{total_queued:0,failed_jobs:0,overall_success_rate:0,jobs_per_minute:0}}),m=v(!0),d=v(null),_=v(null);let c=null;const y=async()=>{try{const[o,t]=await Promise.all([k.get("/api/metrics/agentform"),k.get("/api/metrics/horizon")]);s.value.agentform={total_forms:o.data.total_forms,overall_completion_rate:o.data.overall_completion_rate,pending_verification:o.data.pending_verification,pending_emails:o.data.pending_emails},s.value.horizon={total_queued:t.data.queue_sizes.default+t.data.queue_sizes.verification+t.data.queue_sizes.email,failed_jobs:t.data.failed_jobs,overall_success_rate:t.data.success_rates.overall,jobs_per_minute:t.data.throughput.jobs_per_minute_1},_.value=new Date,d.value=null}catch(o){d.value="Failed to fetch system status",console.error("Error fetching system status:",o)}finally{m.value=!1}},g=S(()=>{const o=s.value.agentform.overall_completion_rate,t=s.value.horizon.overall_success_rate,u=s.value.horizon.total_queued,a=s.value.horizon.failed_jobs;return o>=80&&t>=95&&u<10&&a===0?{status:"healthy",color:"text-green-600 dark:text-green-400",icon:"âœ…"}:o>=60&&t>=85&&u<50&&a<5?{status:"warning",color:"text-yellow-600 dark:text-yellow-400",icon:"âš ï¸"}:{status:"critical",color:"text-red-600 dark:text-red-400",icon:"ðŸš¨"}}),n=o=>o.toLocaleString(),f=o=>`${o.toFixed(1)}%`;return w(()=>{y(),c=setInterval(y,15e3)}),z(()=>{c&&clearInterval(c)}),(o,t)=>(l(),i("div",Le,[e("div",Me,[t[0]||(t[0]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," ðŸ“Š System Status ",-1)),e("div",Ne,[m.value?(l(),i("div",Re)):x("",!0),_.value?(l(),i("span",Ae,r(_.value.toLocaleTimeString()),1)):x("",!0)])]),d.value?(l(),i("div",Pe,r(d.value),1)):x("",!0),e("div",Qe,[e("div",Je,[e("div",Ue,r(g.value.icon),1),e("div",{class:b(["text-lg font-semibold",g.value.color])},r(g.value.status.toUpperCase()),3),t[1]||(t[1]=e("div",{class:"text-sm text-gray-600 dark:text-gray-300"},"System Health",-1))]),e("div",Be,[e("div",Oe,[e("div",We,r(n(s.value.agentform.total_forms)),1),t[2]||(t[2]=e("div",{class:"text-xs text-gray-600 dark:text-gray-300"},"Total Forms",-1))]),e("div",Ge,[e("div",Ke,r(f(s.value.agentform.overall_completion_rate)),1),t[3]||(t[3]=e("div",{class:"text-xs text-gray-600 dark:text-gray-300"},"Completion",-1))]),e("div",Xe,[e("div",Ye,r(n(s.value.horizon.total_queued)),1),t[4]||(t[4]=e("div",{class:"text-xs text-gray-600 dark:text-gray-300"},"Queued Jobs",-1))]),e("div",Ze,[e("div",et,r(n(s.value.horizon.jobs_per_minute)),1),t[5]||(t[5]=e("div",{class:"text-xs text-gray-600 dark:text-gray-300"},"Jobs/min",-1))])]),e("div",tt,[t[11]||(t[11]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Alerts",-1)),s.value.horizon.failed_jobs>0?(l(),i("div",st,[t[6]||(t[6]=e("span",{class:"text-red-600 dark:text-red-400"},"ðŸš¨",-1)),e("span",rt,r(n(s.value.horizon.failed_jobs))+" failed jobs ",1)])):x("",!0),s.value.horizon.total_queued>50?(l(),i("div",at,[t[7]||(t[7]=e("span",{class:"text-yellow-600 dark:text-yellow-400"},"âš ï¸",-1)),e("span",ot," High queue size: "+r(n(s.value.horizon.total_queued)),1)])):x("",!0),s.value.agentform.pending_verification>100?(l(),i("div",it,[t[8]||(t[8]=e("span",{class:"text-orange-600 dark:text-orange-400"},"ðŸ“‹",-1)),e("span",lt,r(n(s.value.agentform.pending_verification))+" forms need verification ",1)])):x("",!0),s.value.agentform.pending_emails>50?(l(),i("div",dt,[t[9]||(t[9]=e("span",{class:"text-blue-600 dark:text-blue-400"},"ðŸ“§",-1)),e("span",nt,r(n(s.value.agentform.pending_emails))+" emails pending ",1)])):x("",!0),s.value.horizon.failed_jobs===0&&s.value.horizon.total_queued<10&&s.value.agentform.pending_verification<50?(l(),i("div",ut,t[10]||(t[10]=[e("span",{class:"text-green-600 dark:text-green-400"},"âœ…",-1),e("span",{class:"text-sm text-green-700 dark:text-green-300"}," All systems operating normally ",-1)]))):x("",!0)]),t[12]||(t[12]=q('<div class="border-t border-gray-200 dark:border-gray-600 pt-3"><div class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Quick Actions</div><div class="grid grid-cols-2 gap-2"><button class="px-3 py-2 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors"> View Logs </button><button class="px-3 py-2 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors"> Requeue Jobs </button><button class="px-3 py-2 text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors"> Clear Cache </button><button class="px-3 py-2 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"> Settings </button></div></div>',1))])]))}}),gt={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},xt={class:"grid auto-rows-min gap-4 md:grid-cols-3"},vt={class:"relative rounded-xl"},mt={key:0,class:"relative rounded-xl"},_t={key:1,class:"relative rounded-xl"},bt={class:"flex justify-end"},$t=h({__name:"Dashboard",setup($){const s=[{title:"Dashboard",href:"/dashboard"}],m=v(!1),d=v(!1);return(_,c)=>(l(),i(H,null,[p(F(C),{title:"Dashboard"}),p(j,{breadcrumbs:s},{default:D(()=>[e("div",gt,[e("div",xt,[e("div",vt,[p(ne)]),m.value?(l(),i("div",mt,[p(Ie)])):x("",!0),d.value?(l(),i("div",_t,[p(ct)])):x("",!0)]),e("div",bt,[e("button",{class:"bg-blue-500 text-white px-4 py-2 rounded-md",onClick:c[0]||(c[0]=y=>m.value=!m.value)},r(m.value?"Hide Horizon Metrics":"Show Horizon Metrics"),1),e("button",{class:"bg-blue-500 text-white px-4 py-2 rounded-md",onClick:c[1]||(c[1]=y=>d.value=!d.value)},r(d.value?"Hide System Status":"Show System Status"),1)])])]),_:1})],64))}});export{$t as default};
